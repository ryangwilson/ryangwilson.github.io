const testimonials = [
  {
    "id": 1,
    "webpimage": "1517447117438.webp",
    "image": "1517447117438.jpg",
    "name": "Austin Kurpuis",
    "firstname": "Austin",
    "lastname": "Kurpuis",
    "title": "Senior Developer",
    "company": "Bitovi",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/austinkurpuis",
    "quote": "Ryan's combination of knowledge, experience, education, and personality make him the ideal UX professional to interface with Engineers."
  },
  {
    "id": 2,
    "webpimage": "1642644477298.webp",
    "image": "1642644477298.jpg",
    "name": "Chris Ochs",
    "firstname": "Chris",
    "lastname": "Ochs",
    "title": "Retail Partnerships Manager",
    "company": "Auror",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/chrisochs253",
    "quote": "Ryan has the uncommon ability to absorb new concepts at a ferocious rate. He effortlessly adapts to new and changing information to incorporate it into his working models."
  },
  {
    "id": 3,
    "webpimage": "1517684825039.webp",
    "image": "1517684825039.jpg",
    "name": "Justin Meyer",
    "firstname": "Justin",
    "lastname": "Meyer",
    "title": "CEO",
    "company": "Bitovi",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/justinbmeyer",
    "quote": "There's no one more knowledgeable or a better advocate for UX processes than Ryan Wilson. He's also a strong advocate for his team and leader."
  },
  {
    "id": 4,
    "webpimage": "1644162188096.webp",
    "image": "1644162188096.jpg",
    "name": "Erica Price",
    "firstname": "Erica",
    "lastname": "Price",
    "title": "Senior User Experience Designer",
    "company": "Yum! Brands",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/eekprice",
    "quote": "Ryan is one of the best managers I’ve ever had. He is personable, entertaining, genuine, and passionate. I respect his transparency, he respects my opinions, and empowers me to be the best UX Designer I can be. "
  },
  {
    "id": 5,
    "webpimage": "1571068147236.webp",
    "image": "1571068147236.jpg",
    "name": "Mark Brehaut",
    "firstname": "Mark",
    "lastname": "Brehaut",
    "title": "Senior Product Designer",
    "company": "Z League",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/markbrehaut",
    "quote": "Ryan's values guide how he works, builds a team, mentors employees, and excels at his craft. He is a deliberate and thoughtful designer who constantly seeks feedback from users to ensure the right product gets put to market."
  },
  {
    "id": 6,
    "webpimage": "1588593915975.webp",
    "image": "1588593915975.jpg",
    "name": "Matthew McDole",
    "firstname": "Matthew",
    "lastname": "McDole",
    "title": "Director, eCommerce Technology",
    "company": "Yum! Brands",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/matthewmcdole",
    "quote": "Ryan is an amazing designer. He designed our tax engine which not only looked awesome but also really simplified what is an inherently complex process."
  },
  {
    "id": 7,
    "webpimage": "1517729833667.webp",
    "image": "1517729833667.jpg",
    "name": "Debra Satterfield",
    "firstname": "Debra",
    "lastname": "Satterfield",
    "title": "Founder",
    "company": "Design Innovation Research Group",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/debra-satterfield-6257078",
    "quote": "Ryan has an excellent understanding of UX and visual communication. His work is always of the highest quality and he works well both independently or as part of a design team."
  },
  {
    "id": 8,
    "webpimage": "1516900632096.webp",
    "image": "1516900632096.jpg",
    "name": "Eileen Cannon",
    "firstname": "Eileen",
    "lastname": "Cannon",
    "title": "Senior Director, Content & Curriculum Strategy",
    "company": "PBS Education",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/emcannon",
    "quote": "Ryan takes the time to understand the challenge, is always open to feedback, and his designs exceed expectations. His project sustained the design needs of our initiative for many months to come."
  },
  {
    "id": 9,
    "webpimage": "1517373588949.webp",
    "image": "1517373588949.jpg",
    "name": "Kathleen Dominiak",
    "firstname": "Kathleen",
    "lastname": "Dominiak",
    "title": "President",
    "company": "Legal Visual Services",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/kdominiak",
    "quote": "Ryan was one of the most creative and quick minded employees that we have ever had. I know that he would be an exceptional asset to any company."
  },
  {
    "id": 10,
    "webpimage": "1544823383290.webp",
    "image": "1544823383290.jpg",
    "name": "Jeremy Lueck",
    "firstname": "Jeremy",
    "lastname": "Lueck",
    "title": "Staff Software Engineer",
    "company": "Tock",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/jeremy-lueck-1187993",
    "quote": "Ryan is one of the most talented and hardworking designers that I have ever met. He is a stickler to his own prepared schedules that guarantee timely deliverables."
  },
  {
    "id": 11,
    "webpimage": "1612974065391.webp",
    "image": "1612974065391.jpg",
    "name": "Ryan Williams",
    "firstname": "Ryan",
    "lastname": "Williams",
    "title": "Senior Designer",
    "company": "Microsoft",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/rygwilliams",
    "quote": "Ryan ensures that his digital experiences are useful and engaging to users. He engages users through contextual inquiry and incorporates feedback into his designs to produce functional and useful products."
  },
  {
    "id": 12,
    "webpimage": "1565503433700.webp",
    "image": "1565503433700.jpg",
    "name": "Austin Smith",
    "firstname": "Austin",
    "lastname": "Smith",
    "title": "Product Designer",
    "company": "ActiveCampaign",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/austin-smith-71755352",
    "quote": "Ryan was an excellent educator and mentor. He taught class as if he were an Art Director, helping us find the best design solution through collaboration and experimentation. Ryan is the right person to lead a team of designers."
  },
  {
    "id": 13,
    "webpimage": "1516306851503.webp",
    "image": "1516306851503.jpg",
    "name": "Jennifer Lizak",
    "firstname": "Jennifer",
    "lastname": "Lizak",
    "title": "Coordinator of Special Projects, Cultural and Civic Engagement",
    "company": "Chicago Public Library",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/jenniferlizak",
    "quote": "Ryan is creative, organized, responsible and hardworking. His talent is undisputed, and he is always willing to go the extra mile to get the job done and help the team."
  },
  {
    "id": 14,
    "webpimage": "1573080072123.webp",
    "image": "1573080072123.jpg",
    "name": "Karen Wang",
    "firstname": "Karen",
    "lastname": "Wang",
    "title": "Senior User Experience Designer",
    "company": "Yum! Brands",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/karenwangdesign",
    "quote": "Ryan's witty personality and years of experiences made him a great mentor. I can consult him whenever I was uncertain on how to approach research or design projects and he’d help me work through and find the solutions."
  },
  {
    "id": 15,
    "webpimage": "1643372699651.webp",
    "image": "1643372699651.jpg",
    "name": "Hannah Titus",
    "firstname": "Hannah",
    "lastname": "Titus",
    "title": "Coordinator of Enrollment Marketing",
    "company": "Marshall University",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/hannahtitus",
    "quote": "Dr. Wilson is a wonderful professor with a unique teaching style that works well no matter what learning style. His instruction is relaxed, creating an atmosphere that encourages questions and really engage with the teaching."
  },
  {
    "id": 16,
    "webpimage": "1586313574566.webp",
    "image": "1586313574566.jpg",
    "name": "Tom Greever",
    "firstname": "Tom",
    "lastname": "Greever",
    "title": "Product Strategy & UX Design",
    "company": "Author, Articulating Design Decisions",
    "topic": "",
    "linkedin": "https://www.linkedin.com/in/tomgreever",
    "quote": "Ryan's an excellent problem solver, UX thinker, and researcher. He led several design projects for us at a senior and lead level in a client-facing role, including some of our largest Fortune 500 clients. Not many people have the breadth of skills Ryan has."
  }
]

function shuffleArray(array) {
  const arrayCopy = array.slice(0);
  for (var i = array.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = array[i];
      array[i] = array[j];
      array[j] = temp;
  }
  return arrayCopy;
}

window.onload = function () {
  const testimonialsCopy = shuffleArray(testimonials);
  const testimonialElements = document.querySelectorAll('[testimonial]');
  testimonialElements.forEach((element) => {
      const rawValue = element.getAttribute("testimonial");
      if (rawValue) {
          const [key, value] = rawValue.split(":");
          const testiminialIndex = testimonialsCopy.findIndex((item) => {
              return String(item[key]).toLowerCase().includes(value.toLowerCase());
          })
          if (testiminialIndex > -1) {
              const testiminial = removeIndexFromArray(testimonialsCopy, testiminialIndex);
              initiateCard(testiminial, element);   
              return;
          }
          console.warn(value + " was not found in " + key + ". Falling back to random!");
      }
      initiateCard(getRandomItem(testimonialsCopy), element);
   });
}

function initiateCard(item, element) {
  element.querySelector('.quote').innerText = item.quote
  element.querySelector('.name').innerText = item.name
  element.querySelector('.title').innerText = item.title
  element.querySelector('.company').innerText = item.company
  element.querySelector('.webpimage').srcset = "../assets/images/testimonial-images/" + item.webpimage
  element.querySelector('.image').srcset = "../assets/images/testimonial-images/" + item.image
  element.querySelector('img').src = "../assets/images/testimonial-images/" + item.image
  element.querySelector('img').alt = "Testimonial image of " + item.name
  element.href = item.linkedin
}

function removeIndexFromArray(items, index) {
  const [item] = items.splice(index, 1);
  return item;
}

function getRandomItem(items) {
  const randomIndex = getRandomNumber(items.length);
  return removeIndexFromArray(items, randomIndex);
}

function getRandomNumber(max) {
  return Math.floor(Math.random() * max);
}

function getRandomInt(max) {
return Math.floor(Math.random() * max) * (Math.round(Math.random()) ? 1 : -1) + "deg";
}

console.log(getRandomInt(4));
// expected output: 0, 1 or 2

document.documentElement.style.setProperty('--random-deg', getRandomInt(3));
